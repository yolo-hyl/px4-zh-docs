# PX4 板支持指南（制造商版）

PX4 开发和测试团队完全支持和维护符合 [Pixhawk 标准](https://pixhawk.org/standards/) 的板卡。希望偏离标准或创建全新板卡的制造商可以这样做，但需要自行承担由此产生的兼容性差异问题。

本指南概述了 [通用要求](#general_requirements) 以及不同 [板卡支持类别](#板卡支持类别) 的附加要求。

::: info
不符合要求的板卡将被 [不支持](#不支持)；它们将不会出现在 PX4 官方网站的硬件列表中，并将从代码库中移除。
:::

<a id="general_requirements"></a>

## 通用要求

所有受支持板卡的通用要求包括：

1. 硬件必须在市场上可获得。
1. 板卡不得存在阻断性硬件缺陷或不可接受的质量问题，导致在 UAV 上使用 PX4 时不可用或危险。  
   板卡需通过验收标准以确保零部件和组装质量。
1. 客户可清晰便捷地联系客户支持。以下任一方式可接受：

   - PX4 Discord 服务器存在
   - 支持邮箱
   - 电话号码

1. 为 PX4 维护人员提供联系点（PoC）（直接邮箱或在 Slack/论坛/Github 上可用）
1. 板卡必须使用 [PX4 引导加载程序协议](https://github.com/PX4/PX4-Autopilot/tree/main/platforms/nuttx/src/bootloader)。  
   更多引导加载程序信息请参见：[PX4 Nuttx 移植指南 > 引导加载程序](../hardware/porting_guide_nuttx.md#bootloader)。
1. 提供充分的文档，包括但不限于：

   - 公开可用的完整引脚图，将 PX4 引脚定义映射到：
     1. 微控制器引脚
     2. 物理外部连接器
   - 主要组件（传感器、电源等）的框图或完整原理图，可推断软件需求和启动顺序
   - 详细说明产品使用方法的用户手册

1. 必须有专门的网页介绍该板卡与 PX4 的适配情况，列出使用 PX4 的功能和限制，并包含或链接上述文档。

## 板卡支持类别

板卡支持类别如下所示。各分类的自动驾驶仪板卡列表请参见：[https://px4.io/autopilots/.](https://px4.io/autopilots/)

::: info
制造商支持的板卡可能比 Pixhawk 板卡得到更佳支持（例如通过规模经济）。
:::

## Pixhawk 标准

符合 Pixhawk 标准的板卡称为 Pixhawk 板卡。这些标准在 [http://pixhawk.org](http://pixhawk.org) 上有详细说明，但总体要求板卡通过标准规定的电气测试，并且制造商已签署 Pixhawk 采用者和商标协议。

PX4 通常只支持市售的板卡，这意味着通常支持过去五年内发布的板卡标准。

<a id="ver_rev_id"></a>

### VER 和 REV ID（硬件版本和修订识别）

FMUv5 及后续版本具有电气识别机制。该识别机制配合可选配置数据将用于定义硬件的配置（相对于强制性设备和电源配置）。制造商必须通过向 [DS-018 Pixhawk 标准](https://github.com/pixhawk/Pixhawk-Standards) 提交 PR 以获得 PX4 板卡维护人员分配的 VER 和 REV ID 来定义板卡版本和修订。

由于这些板卡完全符合 Pixhawk 标准，因此为该 FMU 版本分配的 VER 和 REV ID 是默认值。

## 制造商支持

这些板卡由制造商提供支持。要符合此分类，板卡必须在 PX4 最新稳定版本发布后 4 个月内与其兼容。

- 制造商负责支持
- 制造商必须向核心开发团队提供至少 2 块板卡（用于测试架和测试团队）

:::tip
虽然 PX4 维护人员和飞行测试团队没有义务支持和测试此类板卡，但我们强烈建议 PX4 和制造商团队建立紧密合作关系。这将为所有相关方带来更好的结果。
:::

::: info
这些板卡将根据兼容性分配 [VER 和 REV ID](#ver_rev_id)。如果板卡是 FMU 规格的变种且能够运行相同二进制文件（制造商支持的微小差异除外），PX4 将进行特殊分配。  
联系 PX4 维护人员 [boards@px4.io](mailto:boards@px4.io) 以获取更多信息。
:::

## 实验性支持

这些板卡是不属于上述任何分类或已不再属于这些分类的板卡。适用以下要求：

- 板卡必须至少与某个 PX4 发布版本配合定义的机体类型使用，但不一定是最新版本。

::: info
之前是 Pixhawk 或制造商支持的实验性板卡将保留其原始 ID。  
新实验性板卡将根据兼容性分配 [VER 和 REV ID](#ver_rev_id)，方式与制造商支持板卡相同。
:::

## 不支持

此分类包括所有不受 PX4 项目或制造商支持且不属于"实验性"支持范围的板卡。

- 板卡在理论上与我们已支持的某类设备部分兼容，将其提升到"实验性"状态只需少量工作，但开发团队或制造商当前未推进此工作
- 硬件制造商/所有者违反我们的[行为准则](https://discuss.px4.io/t/code-of-conduct/13655)
- 闭源，其中添加支持板卡所需工具/库/驱动程序等因许可限制而被认为不兼容
- 板卡未满足通用要求中列出的最低要求

::: info
不支持的板卡将不会分配 [VER 和 REV ID](#ver_rev_id)（且无法运行 PX4 FMUvX 固件）。
:::

## 发布流程

当制造商声明某板卡属于特定分类时，假定该板卡符合该分类及通用要求的规范。

当新板卡进入市场并属于制造商支持或实验性分类时，制造商负责更新 PX4 文档并完成 PX4 中的板卡发布流程。我们建议按以下步骤操作：

联系 PX4 板卡维护人员 [boards@px4.io](mailto:boards@px4.io) 并请求以下内容：

1. 为引导加载程序和 QGC 中的固件选择分配 _板卡ID_
2. 分配 REV 和 VER ID 电阻值
3. 如果板卡支持 USB：请求分配 USB VID 和 PID 或提供 USB VID 和 PID

根据 [移植指南](../hardware/porting_guide.md) 中描述的板卡移植发布流程集成板卡

:::warning
板卡支持流程可能会随着时间改进和变更。  
硬件制造商鼓励通过定期硬件会议、Discuss 论坛或 Discord 参与此流程的改进。
:::

## 支持

如果板卡支持指南/流程中的部分内容不清晰：

- 在 Discord 频道的 `Hardware` 分类下或 Discuss 论坛上寻求社区帮助
- 参加定期硬件会议
- 咨询服务选项请参见：[https://px4.io/community/consultants/](https://px4.io/community/consultants/)