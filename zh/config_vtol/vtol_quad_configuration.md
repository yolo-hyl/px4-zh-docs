

# 通用标准垂直起降（QuadPlane）配置与调校

这是针对[通用标准垂直起降](../airframes/airframe_reference.md#vtol_standard_vtol_generic_standard_vtol)的配置文档，也称为"四旋翼垂直起降（QuadPlane VTOL）"。  
这本质上是一个固定翼机体，增加了四旋翼电机。

有关机体特定的文档和构建说明，请参见[VTOL 机身构建](../frames_vtol/index.md)。

## 固件与基本设置

1. 运行 _QGroundControl_
2. 烧录当前版本或master分支（PX4 `main` 分支构建）的固件。
3. 在 [框架设置](../config/airframe.md) 部分选择适合的 VTOL 机体类型。

   如果您的机体类型未列出，请选择 [通用标准VTOL](../airframes/airframe_reference.md#vtol_standard_vtol_generic_standard_vtol) 机体。

### 飞行 / 转换模式切换

您应在遥控器上分配一个开关用于切换多旋翼和固定翼模式。

::: info
虽然PX4允许不使用遥控器飞行，但在调试/配置新机体时必须使用遥控器。
:::

在[飞行模式](../config/flight_mode.md)配置中完成此操作，您可[将飞行模式及其他功能分配到遥控器开关](../config/flight_mode.md#what-flight-modes-and-switches-should-i-set)。  
该开关也可以通过参数[RC_MAP_TRANS_SW](../advanced_config/parameter_reference.md#RC_MAP_TRANS_SW)进行分配。

开关处于关闭位置时，表示您正在多旋翼模式下飞行。

### 多旋翼/固定翼调校

在尝试首次转换到固定翼飞行模式前，必须确保您的VTOL在多旋翼模式下已调校良好。  
其中一个原因是这种模式是当转换过程中出现异常时的回归模式，且此时机体可能已经以较高速度运动。如果调校不佳，可能会导致严重后果。

如果您有可用的跑道且总重量不高，也建议对固定翼飞行模式进行调校。  
如果没有，则需要在切换到固定翼模式后进行。如果出现异常情况，您必须准备好（并具备能力）切换回多旋翼模式。

请按照相应的调校指南对多旋翼和固定翼进行调校。

### 过渡调校

虽然看起来你操作的机体可以飞行在两种模式中（多旋翼用于垂直起降，固定翼用于前飞），但还有一个需要调校的状态：transition。

确保过渡调校正确对安全进入固定翼模式非常重要，例如，当机体转换时如果气流速度过慢可能会导致失速。

#### 过渡油门

参数: [VT_F_TRANS_THR](../advanced_config/parameter_reference.md#VT_F_TRANS_THR)

前过渡油门定义了前过渡期间推杆/拉杆电机的目标油门值。

必须将其设置得足够高，以确保达到过渡空速。  
如果您的机体配备了空速传感器，则可以增加此参数以加快前过渡的完成速度。  
对于您的第一次过渡，建议将值设得稍高而非过低。

#### 正向过渡推进器/牵引器斜率

参数: [VT_PSHER_SLEW](../advanced_config/parameter_reference.md#VT_PSHER_SLEW)

正向过渡指从多旋翼模式转换到固定翼模式的过程。正向过渡推进器/牵引器斜率表示将油门从当前值提升到目标值（由`VT_F_TRANS_THR`定义）所需的时间（单位：秒）。

值为0时，将立即设置过渡油门值。默认斜率为0.33，意味着将用3秒时间将油门提升到100%。如果希望油门提升更平滑，可减小此值。

请注意，一旦提升阶段结束，油门将保持在目标设置值，直至（理想情况下）达到过渡速度。

#### 空速混合

参数: [VT_ARSP_BLEND](../advanced_config/parameter_reference.md#VT_ARSP_BLEND)

默认情况下，当空速接近转换速度时，多旋翼姿态控制将逐渐降低，固定翼控制将开始持续增加，直到完成转换。

通过将此参数设置为0可禁用混合功能，此时将保持完整的多旋翼控制并完全禁用固定翼控制，直到完成转换。

#### 转换空速

参数：[VT_ARSP_TRANS](../advanced_config/parameter_reference.md#VT_ARSP_TRANS)

当达到此空速时，将触发电机旋翼模式向固定翼模式的转换。  
必须确保您已正确校准空速传感器。  
同时，选择一个明显高于机体失速速度的空速也很重要（请检查 `FW_AIRSPD_MIN`），因为目前系统不会自动检查这一点。

#### 开环过渡时间  
参数: [VT_F_TR_OL_TM](../advanced_config/parameter_reference.md#VT_F_TR_OL_TM)  

这指定了在没有空速反馈（例如没有空速传感器）时，前过渡阶段的持续时间（以秒为单位）。  
应设置一个值以确保机体达到足够高的空速以完成过渡，例如空速应超过 [VT_ARSP_TRANS](../advanced_config/parameter_reference.md#VT_ARSP_TRANS)。

#### 转换超时  
[VT_TRANS_TIMEOUT](../advanced_config/parameter_reference.md#VT_TRANS_TIMEOUT)  

此参数指定了前向过渡阶段的持续时间上限。如果机体在此时间后仍未达到过渡空速，则过渡将被中止，并触发[Quadchute](../config/safety.md#quad-chute-failsafe)事件。  
:::note  
此外，如果存在空速传感器，当开环过渡时间[VT_F_TR_OL_TM](../advanced_config/parameter_reference.md#VT_F_TR_OL_TM)结束后，空速仍未达到[VT_ARSP_BLEND](../advanced_config/parameter_reference.md#VT_ARSP_BLEND)，则过渡同样会被中止。此检查用于避免当空速传感器发生故障时，机体速度过高的情况。  
:::

### 过渡飞行提示

如前所述，请确保多旋翼模式已调校良好。如果在转换过程中出现问题，你可以切换回此模式，且切换过程应相当平稳。

在飞行前，为三种阶段（多旋翼、过渡、固定翼）中的每一个阶段制定应对计划：当处于任一阶段时若出现问题，你将如何处理。

电池电量：在飞行结束时，为多旋翼着陆转换留出足够的余量。不要让电池电量过低，因为多旋翼模式下着陆需要更多电量。保持保守策略。

#### Transition: Getting Ready

确保你距离地面至少20米，并有足够的空间完成过渡。  
你的VTOL在切换到固定翼模式时可能会降低高度，尤其是在空速不足的情况下。  

尽可能迎风进行过渡，否则它会在过渡前远离你。  

在开始过渡前，确保VTOL处于稳定的悬停状态。

#### 转换：多旋翼到固定翼（前转换）

开始你的转换。  
它应该在50-100米范围内完成转换。  
如果转换未完成或飞行不稳定，请中止转换（见下文），降落或悬停回起始位置后降落。  
尝试增加[转换油门](#过渡油门) (`VT_F_TRANS_THR`) 的数值。  
如果你没有使用空速传感器，可以考虑缩短转换时间 (`VT_F_TRANS_DUR`)。  
如果你使用了空速传感器，可以考虑降低转换空速，但需保持远高于失速速度。

一旦你注意到转换发生，要随时准备应对高度下降，这可能需要快速加大油门。

:::warning
以下功能已讨论但尚未实现：

- 一旦转换完成，多旋翼电机将停止工作，推/拉式油门将保持在 `VT_F_TRANS_THR` 水平，直到你移动油门杆（假设你处于手动模式）。  
:::

#### 过渡：固定翼到多旋翼（返航过渡）

当你切换回多旋翼模式时，请以直线平飞姿态接近目标区域并降低速度，切换过渡开关后将立即启动多旋翼电机并停止推进/拉进螺旋桨，这通常会带来较为平滑的滑翔过渡效果。

请注意，切换模式时的油门值将决定多旋翼在切换瞬间的推力大小。由于机翼仍在飞行，你将有充足的时间调整油门以实现/保持悬停状态。

有关返航过渡的高级调参，请参考[返航过渡调参指南](vtol_back_transition_tuning.md)

#### 中止转换

了解在转换过程中撤销转换命令时的预期结果非常重要。

当从**多旋翼到固定翼**（转换开关处于开启/固定翼模式）时，若在转换完成前将开关切回（关闭/多旋翼模式），将立即返回多旋翼模式。

当从**固定翼到多旋翼**时，这种类型的VTOL开关是即时生效的，因此不存在"回退"选项（与倾转旋翼VTOL不同）。  
若想重新回到固定翼模式，需要完成完整的转换流程。  
如果飞行器仍在高速移动中，转换过程会快速完成。

### 支持

如果您有关于VTOL转换或配置的任何问题，请参阅[discuss.px4.io/c/px4/vtol](https://discuss.px4.io/c/px4/vtol)。