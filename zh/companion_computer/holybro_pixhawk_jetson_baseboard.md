# Holybro Pixhawk Jetson è½½æ¿

[Holybro Pixhawk Jetson è½½æ¿](https://holybro.com/products/pixhawk-jetson-baseboard) å°† Pixhawk é£æ§ä¸ NVIDIA Orin ç³»åˆ—è®¡ç®—æœºé›†æˆäºå•ä¸€è®¾å¤‡ä¸­ï¼Œå¤§å¹…ç®€åŒ–äº†ä½¿ç”¨ä¼´é£è®¡ç®—æœºæ—¶çš„ç¡¬ä»¶å’Œè½¯ä»¶é…ç½®æµç¨‹ã€‚

![Jetson è½½æ¿ä¸ Pixhawk](../../assets/companion_computer/holybro_pixhawk_jetson_baseboard/hero_image.png)

è¯¥è½½æ¿æä¾› [Jetson Orin NX (16GB RAM)](https://holybro.com/products/nvidia-jetson-orin-nx-16g) æˆ– [Jetson Orin Nano (4GB RAM)](https://holybro.com/products/nvidia-jetson-orin-nx-16g?variant=44391410598077) ä¸¤ç§ç‰ˆæœ¬ï¼Œå¯ä¸ç¬¦åˆ Pixhawk Autopilot Bus (PAB) è§„æ ¼çš„ä»»æ„ Pixhawk é£æ§é…åˆä½¿ç”¨ï¼Œä¾‹å¦‚ Pixhawk 6 æˆ– Pixhawk 6Xã€‚

æœ¬æŒ‡å—å°†å¼•å¯¼æ‚¨å®Œæˆä»¥ä¸‹æ“ä½œï¼š

- ç¡¬ä»¶æ¦‚è§ˆåŠé…ç½®
- Jetson æ¿çƒ§å½•åŠé€šè¿‡ SSH ç™»å½•
- Pixhawk ä¸Š PX4 å›ºä»¶çš„çƒ§å½•ï¼ˆåŠç¼–è¯‘ï¼‰
- Pixhawk ä¸ Jetson ä¹‹é—´çš„ä¸²å£å’Œä»¥å¤ªç½‘è¿æ¥é…ç½®
- é€šè¿‡ä¸²å£å’Œä»¥å¤ªç½‘æ¥å£çš„ MAVLink é…ç½®/æµ‹è¯•
- é€šè¿‡ä¸²å£å’Œä»¥å¤ªç½‘æ¥å£çš„ ROS 2/XRCE-DDS é…ç½®/æµ‹è¯•

::: tip
æ‚¨æš‚æ—¶éœ€è¦ä»¥ä¸‹ç¡¬ä»¶æ‰èƒ½ç™»å½• Jetson å¹¶è·å–å…¶ IP åœ°å€ï¼Œä¹‹åå³å¯é€šè¿‡ SSH ç™»å½•ï¼š

- å¤–æ¥æ˜¾ç¤ºå™¨ã€‚
  å¦‚æœæ˜¾ç¤ºå™¨æ²¡æœ‰ mini HDMI æ¥å£ï¼Œè¿˜éœ€è¦ [Mini HDMI è½¬ HDMI è½¬æ¢å™¨](https://a.co/d/6N815N9)ï¼ˆå¦‚æœå¤–æ¥æ˜¾ç¤ºå™¨æ”¯æŒ HDMI è¾“å…¥ï¼‰
- ä»¥å¤ªç½‘çº¿
- é¼ æ ‡å’Œé”®ç›˜ï¼ˆè½½æ¿æä¾› Jetson çš„ 4 ä¸ª USB æ¥å£ï¼Œå…¶ä¸­ä¸¤ä¸ªä¸º USB 3.0ï¼‰

:::

## è´­ä¹°

- [Holybro Pixhawk Jetson Baseboard](https://holybro.com/products/pixhawk-jetson-baseboard)

å¯ä»¥é€‰æ‹© Pixhawk è‡ªåŠ¨é©¾é©¶ä»ªå’Œ Jetson è®¡ç®—æœºå‹å·ã€‚æ‰€æœ‰ä¸»æ¿å‡é…å¤‡ WiFi æ¨¡å—ã€æ‘„åƒå¤´ã€ç”µæºæ¨¡å—ã€ç‹¬ç«‹çš„ UBEC ä»¥åŠç”µæºåˆ†é…æ¿ï¼ˆPDBï¼‰ã€‚

## è§„æ ¼

æ­¤ä¿¡æ¯æ¥æºäº[Holybro Pixhawk-Jetson Baseboard Documentation](https://docs.holybro.com/autopilot/pixhawk-baseboards/pixhawk-jetson-baseboard)

:::: tabs

::: tab å°ºå¯¸

[å°ºå¯¸ä¸é‡é‡](https://docs.holybro.com/autopilot/pixhawk-baseboards/pixhawk-jetson-baseboard/dimension-and-weight) (Holybro)

- å°ºå¯¸  
  - 126 x 80 x 45mmï¼ˆå«Jetson Orin NX + æ•£çƒ­å™¨/é£æ‰‡ & é£æ§æ¨¡å—ï¼‰  
  - 126 x 80 x 22.9mmï¼ˆä¸å«Jetsonå’Œé£æ§æ¨¡å—ï¼‰  

- é‡é‡  
  - 190gï¼ˆå«Jetsonã€æ•£çƒ­å™¨ã€é£æ§æ¨¡å—ã€M.2 SSDã€M.2 Wi-Fiæ¨¡å—ï¼‰  

:::

::: tab Jetsonè¿æ¥å™¨

- 2x åƒå…†ä»¥å¤ªç½‘ç«¯å£  
  - é€šè¿‡ä»¥å¤ªç½‘äº¤æ¢æœºï¼ˆRTL8367Sï¼‰è¿æ¥è‡³Jetsonä¸é£æ§  
  - ä»¥å¤ªç½‘äº¤æ¢æœºç”±ä¸Pixhawkç›¸åŒçš„ç”µè·¯ä¾›ç”µ  
  - 8é’ˆ JST-GH  
  - RJ45  

- 2x MIPI CSIç›¸æœºè¾“å…¥  
  - å„4é€šé“  
  - 22é’ˆ Raspberry Pi Cam FFC  

- 2x USB 3.0ä¸»æœºç«¯å£  
  - USB A  
  - 5Aç”µæµé™åˆ¶  

- 2x USB 2.0ä¸»æœºç«¯å£  
  - 5é’ˆ JST-GH  
  - 0Aç”µæµé™åˆ¶  

- USB 2.0ç¼–ç¨‹/è°ƒè¯•ç«¯å£  
  - USB-C  

- 2ä¸ªKey M 2242/2280 NVMe SSDæ’æ§½  
  - PCIEx4  

- 2ä¸ªKey E 2230 Wi-Fi/è“ç‰™æ’æ§½  
  - PCIEx2  
  - USB  
  - UART  
  - I2S  

- Mini HDMIè¾“å‡º  

- 4x GPIO  
  - 6é’ˆ JST-GH  

- CANç«¯å£  
  - è¿æ¥è‡³é£æ§çš„CAN2ï¼ˆ4é’ˆ JST-GHï¼‰  

- SPIç«¯å£  
  - 7é’ˆ JST-GH  

- I2Cç«¯å£  
  - 4é’ˆ JST-GH  

- I2Sç«¯å£  
  - 7é’ˆ JST-GH  

- 2x UARTç«¯å£  
  - 1ä¸ªç”¨äºè°ƒè¯•  
  - 1ä¸ªè¿æ¥è‡³é£æ§çš„telem2  

- é£æ‰‡ç”µæºç«¯å£  

- IIM42652 IMU  

:::

::: tab é£æ§è¿æ¥å™¨

- Pixhawké£æ§æ€»çº¿æ¥å£  
  - 100é’ˆ Hirose DF40  
  - 50é’ˆ Hirose DF40  

- å†—ä½™æ•°å­—ç”µæºæ¨¡å—è¾“å…¥  
  - I2Cç”µæºç›‘æ§æ”¯æŒ  
  - 2x 6é’ˆ Molex CLIK-Mate  

- ç”µæºè·¯å¾„é€‰æ‹©å™¨  

- è¿‡å‹ä¿æŠ¤  

- ç”µå‹å‚æ•°  
  - æœ€å¤§è¾“å…¥ç”µå‹ï¼š6V  
  - USBç”µæºè¾“å…¥ï¼š4.75~5.25V  

- å®Œæ•´GPSåŠ å®‰å…¨å¼€å…³ç«¯å£  
  - 10é’ˆ JST-GH  

- äºŒçº§ï¼ˆGPS2ï¼‰ç«¯å£  
  - 6é’ˆ JST-GH  

- 2x CANç«¯å£  
  - 4é’ˆ JST-GH  

- 3x å¸¦æµé‡æ§åˆ¶çš„é¥æµ‹ç«¯å£  
  - 2x 6é’ˆ JST-GH  
  - 1ä¸ªè¿æ¥è‡³Jetsonçš„`UART1`ç«¯å£  

- 16è·¯PWMè¾“å‡º  
  - 2x 10é’ˆ JST-GH  

- UART4 & I2Cç«¯å£  
  - 6é’ˆ JST-GH  

- 2x åƒå…†ä»¥å¤ªç½‘ç«¯å£  
  - é€šè¿‡ä»¥å¤ªç½‘äº¤æ¢æœºï¼ˆRTL8367Sï¼‰è¿æ¥è‡³Jetsonä¸é£æ§  
  - 8é’ˆ JST-GH  
  - RJ45  

- AD & IO  
  - 8é’ˆ JST-GH  

- USB 2.0  
  - USB-C  
  - 4é’ˆ JST-GH  

- DSMè¾“å…¥  
  - 3é’ˆ JST-ZH 1.5mmé—´è·  

- æ— çº¿ç”µæ¥æ”¶è¾“å…¥  
  - PPM/SBUS  
  - 5é’ˆ JST-GH  

- SPIç«¯å£  
  - å¤–éƒ¨ä¼ æ„Ÿå™¨æ€»çº¿ï¼ˆSPI5ï¼‰  
  - 11é’ˆ JST-GH  

- 2x è°ƒè¯•ç«¯å£  
  - 1ä¸ªç”¨äºFMU  
  - 1ä¸ªç”¨äºIO  
  - 10é’ˆ JST-SH  

:::

::: tab ç”µæºï¼ˆåº•æ¿ï¼‰

Pixhawkçš„ç”µæºé€šè¿‡Jetsonæ—è¾¹`Power 1`æˆ–`Power 2`ç«¯å£ä¾›ç”µï¼ŒJetsonçš„ç”µæºè¿æ¥æ˜¯æ¿ä¾§çš„XT30æ’å¤´ã€‚

Jetsonçš„è¾“å…¥ç”µæºç”µè·¯ä¸Pixhawké£æ§åˆ†ç¦»ï¼š

- 8V/3A æœ€å°ï¼ˆå–å†³äºä½¿ç”¨å’Œå¤–è®¾ï¼‰  
- ç”µå‹èŒƒå›´ï¼š7-21Vï¼ˆ3S-4Sï¼‰  
- Jetsonåº•æ¿å†…ç½®BECæ”¯æŒ7-21Vï¼ˆ3S-4Sï¼‰  
  æ³¨æ„ï¼šå¯¹äº4Sä»¥ä¸Šåº”ç”¨å¯ä½¿ç”¨å¤–éƒ¨UBEC-12A  

å¼€å‘æ—¶å»ºè®®ä½¿ç”¨ä»¥ä¸‹æœ‰çº¿ç”µæºé€‚é…å™¨ï¼š

- [Jetson Orinç”µæºé€‚é…å™¨](https://holybro.com/products/power_adapter_for_jetson_orin)

å®Œæ•´çš„ç”µæºä¾›åº”æ¡†å›¾å¦‚ä¸‹ï¼š

![Jetsonè½½æ¿ç”µæºå›¾](../../assets/companion_computer/holybro_pixhawk_jetson_baseboard/peripherals_block_diagram_1.png)

:::

::: tab ç”µæºï¼ˆUBEC-12Aï¼‰

Holybroå•ç‹¬æä¾›çš„UBEC 12Aï¼ˆ3-14Sï¼‰BECå¯ç”¨äºæ›´é«˜åŠŸç‡åº”ç”¨ï¼ˆ4Sï¼‰ã€‚  
è¯¥æ¨¡å—æ¯”å†…ç½®åº•æ¿BECæä¾›æ›´å¤§åŠŸç‡ï¼Œå¹¶åœ¨BECæ•…éšœæ—¶æä¾›å†—ä½™å’Œæ›´ä¾¿æ·çš„æ›´æ¢ã€‚

ç”µæºå‚æ•°ï¼š

- è¾“å…¥ç”µå‹ï¼š3~14Sï¼ˆXT30ï¼‰  
- è¾“å‡ºç”µå‹ï¼š6.0V/7.2V/8.0V/9.2Vï¼ˆæ¨è7.2Vç”¨äºJetsonæ¿ä¾›ç”µï¼‰  
- è¾“å‡ºç”µæµ  
  - æŒç»­ï¼š12A  
  - å³°å€¼ï¼š24A  

å°ºå¯¸

- å°ºå¯¸ï¼š48x33.6x16.3 mm  
- é‡é‡ï¼š47.8g  

:::

::::æ ¹æ®æ‚¨çš„éœ€æ±‚ï¼Œä»¥ä¸‹æ˜¯Jetson Orinä¸é£æ§å™¨ï¼ˆå¦‚Pixhawkï¼‰çš„è¿æ¥æ–¹æ¡ˆï¼Œé‡ç‚¹è§£å†³CSIç›¸æœºä¸I2Cç«¯å£çš„è¿æ¥é—®é¢˜ï¼Œå¹¶ç¡®ä¿ç”µæºå’Œæ•°æ®ä¼ è¾“çš„æ­£ç¡®æ€§ï¼š

---

### **1. æ˜ç¡®éœ€æ±‚ä¸æ¥å£åŒ¹é…**
- **CSIç›¸æœºï¼ˆOrinï¼‰**ï¼šç”¨äºé«˜é€Ÿè§†é¢‘ä¼ è¾“ï¼Œæ¥å£ç±»å‹ä¸ºCamera Serial Interface (CSI)ï¼Œéœ€è¿æ¥åˆ°Orinçš„CSIç«¯å£ï¼ˆCamera0/Camera1ï¼‰ã€‚
- **I2Cç«¯å£ï¼ˆé£æ§å™¨ï¼‰**ï¼šç”¨äºä½é€Ÿä¼ æ„Ÿå™¨é€šä¿¡ï¼Œéœ€è¿æ¥åˆ°Orinçš„I2Cç«¯å£ï¼ˆå¦‚Orin_I2C1_SCL/SDAï¼‰ã€‚
- **è¿æ¥ç›®æ ‡**ï¼šè‹¥éœ€å°†CSIç›¸æœºæ•°æ®ä¼ è¾“åˆ°é£æ§å™¨ï¼Œéœ€é€šè¿‡ä¸­é—´åè®®è½¬æ¢ï¼›è‹¥ä»…éœ€I2Cé€šä¿¡ï¼Œåˆ™ç›´æ¥è¿æ¥I2Cç«¯å£ã€‚

---

### **2. è¿æ¥æ–¹æ¡ˆ**
#### **æ–¹æ¡ˆä¸€ï¼šCSIç›¸æœºä¸Orinè¿æ¥**
- **ç¡¬ä»¶è¿æ¥**ï¼š
  - å°†CSIç›¸æœºæ¨¡å—çš„CSIæ¥å£ç›´æ¥è¿æ¥åˆ°Orinçš„ **Camera0 æˆ– Camera1** ç«¯å£ï¼ˆå‚è€ƒOrin CSIç«¯å£ä¿¡å·å®šä¹‰ï¼‰ã€‚
  - **ç”µæº**ï¼šCSIç«¯å£å¯èƒ½æä¾›3.3V VDDï¼Œéœ€ç¡®è®¤ç›¸æœºæ¨¡å—æ˜¯å¦æ”¯æŒï¼›è‹¥ä¸è¶³ï¼Œéœ€é¢å¤–ä¾›ç”µã€‚
  - **I2Cæ§åˆ¶**ï¼šè‹¥ç›¸æœºéœ€I2Cæ§åˆ¶ï¼ˆå¦‚è°ƒæ•´å‚æ•°ï¼‰ï¼Œéœ€å°†Orinçš„ **CAM0_I2C_SCL/SDA**ï¼ˆCamera0ç«¯å£ï¼‰ä¸ç›¸æœºæ¨¡å—çš„I2Cæ¥å£è¿æ¥ï¼Œè€Œéé£æ§å™¨çš„I2Cç«¯å£ã€‚

#### **æ–¹æ¡ˆäºŒï¼šOrinä¸é£æ§å™¨I2Cé€šä¿¡**
- **ç¡¬ä»¶è¿æ¥**ï¼š
  - å°†Orinçš„ **Orin_I2C1_SCL** å’Œ **Orin_I2C1_SDA**ï¼ˆæ¥è‡ªOrin I2Cç«¯å£ï¼‰ä¸é£æ§å™¨çš„I2C_SCL/SDAè¿æ¥ã€‚
  - **å…±åœ°**ï¼šç¡®ä¿Orinçš„ **GND** ä¸é£æ§å™¨çš„GNDè¿æ¥ã€‚
  - **ç”µæº**ï¼šè‹¥é£æ§å™¨I2Cç«¯å£æä¾›5Væˆ–3.3V VCCï¼Œéœ€ç¡®è®¤ä¸Orin I2Cç«¯å£çš„ç”µå‹åŒ¹é…ï¼ˆé€šå¸¸3.3Vï¼‰ã€‚

#### **æ–¹æ¡ˆä¸‰ï¼šCSIç›¸æœºæ•°æ®ä¼ è¾“åˆ°é£æ§å™¨ï¼ˆéœ€åè®®è½¬æ¢ï¼‰**
- **ä¸­é—´è®¾å¤‡**ï¼šä½¿ç”¨FPGAæˆ–å¾®æ§åˆ¶å™¨ï¼ˆå¦‚Jetson Nanoï¼‰å°†CSIè§†é¢‘æµè½¬æ¢ä¸ºI2Cæˆ–UARTåè®®ã€‚
- **æ­¥éª¤**ï¼š
  1. Oriné€šè¿‡CSIç«¯å£é‡‡é›†è§†é¢‘æ•°æ®ã€‚
  2. ä¸­é—´è®¾å¤‡æ¥æ”¶Orinçš„è§†é¢‘æµï¼Œè½¬æ¢ä¸ºI2C/UARTåè®®ã€‚
  3. ä¸­é—´è®¾å¤‡çš„I2C/UARTæ¥å£è¿æ¥åˆ°é£æ§å™¨çš„å¯¹åº”ç«¯å£ã€‚

---

### **3. ç”µæºä¸ä¿¡å·è¿æ¥ç»†èŠ‚**
- **ç”µæºåŒ¹é…**ï¼š
  - Orinçš„CSIç«¯å£å’ŒI2Cç«¯å£é€šå¸¸æä¾› **3.3V**ï¼Œé£æ§å™¨çš„I2Cç«¯å£ä¹Ÿå¤šä¸º3.3Vï¼Œå¯ç›´æ¥è¿æ¥ã€‚
  - è‹¥é£æ§å™¨I2Cç«¯å£ä¸º5Vï¼Œéœ€ä½¿ç”¨ **I2Cç”µå¹³è½¬æ¢å™¨**ï¼ˆå¦‚TXB0108ï¼‰é˜²æ­¢ç”µå‹ä¸åŒ¹é…æŸåè®¾å¤‡ã€‚
- **ä¿¡å·çº¿è¿æ¥**ï¼š
  - **I2Cé€šä¿¡**ï¼šOrinçš„ **Orin_I2C1_SCL** â†’ é£æ§å™¨ **I2C_SCL**ï¼›Orinçš„ **Orin_I2C1_SDA** â†’ é£æ§å™¨ **I2C_SDA**ã€‚
  - **å…±åœ°**ï¼šOrin **GND** â†’ é£æ§å™¨ **GND**ã€‚

---

### **4. æ³¨æ„äº‹é¡¹**
1. **åè®®å·®å¼‚**ï¼šCSIæ˜¯é«˜é€Ÿè§†é¢‘æ¥å£ï¼ŒI2Cæ˜¯ä½é€Ÿæ§åˆ¶æ¥å£ï¼Œç›´æ¥è¿æ¥ä¸å¯è¡Œã€‚è‹¥éœ€ä¼ è¾“è§†é¢‘ï¼Œéœ€é€šè¿‡USB/ä»¥å¤ªç½‘æˆ–ä¸­é—´è½¬æ¢è®¾å¤‡ã€‚
2. **å¸¦å®½é™åˆ¶**ï¼šI2Cæœ€å¤§é€Ÿç‡çº¦400 kHzï¼ˆæ ‡å‡†æ¨¡å¼ï¼‰æˆ–3.4 MHzï¼ˆå¿«é€Ÿæ¨¡å¼ï¼‰ï¼Œè¿œä½äºCSIçš„Gbpsçº§åˆ«ï¼Œä»…é€‚åˆæ§åˆ¶ä¿¡å·ã€‚
3. **é£æ§å™¨å…¼å®¹æ€§**ï¼šç¡®è®¤é£æ§å™¨çš„I2Cæ¥å£æ”¯æŒæ‰€éœ€åè®®ï¼ˆå¦‚MPU9250çš„I2Cåœ°å€ï¼‰ã€‚

---

### **5. ç¤ºä¾‹è¿æ¥å›¾**
```plaintext
Orin Camera0ç«¯å£:
- CSI_DATA[0..7] â†’ CSIç›¸æœºæ¨¡å—
- CAM0_I2C_SCL â†’ CSIç›¸æœºæ¨¡å—çš„I2C_SCL
- CAM0_I2C_SDA â†’ CSIç›¸æœºæ¨¡å—çš„I2C_SDA
- 3.3V VDD â†’ CSIç›¸æœºä¾›ç”µ

Orin I2Cç«¯å£ (Orin_I2C1):
- SCL â†’ é£æ§å™¨ I2C_SCL
- SDA â†’ é£æ§å™¨ I2C_SDA
- GND â†’ é£æ§å™¨ GND
```

---

### **6. è½¯ä»¶é…ç½®**
- **Orinä¾§**ï¼š
  - å¯ç”¨I2Cæ¥å£ï¼ˆ`sudo i2cdetect -y 1` æ£€æŸ¥è®¾å¤‡åœ°å€ï¼‰ã€‚
  - ä½¿ç”¨CSIé©±åŠ¨ï¼ˆå¦‚`v4l2-ctl`ï¼‰é…ç½®ç›¸æœºå‚æ•°ã€‚
- **é£æ§å™¨ä¾§**ï¼š
  - é…ç½®I2Cä¼ æ„Ÿå™¨é©±åŠ¨ï¼ˆå¦‚Pixhawkçš„`MPU9250`ï¼‰ã€‚
  - é€šè¿‡ä¸²å£æˆ–MAVLinkåè®®ä¸Oriné€šä¿¡ï¼ˆéI2Cï¼‰ã€‚

---

### **æ€»ç»“**
- **ç›´æ¥è¿æ¥**ï¼šä»…I2Cé€šä¿¡å¯è¡Œï¼ŒCSIç›¸æœºéœ€Orinå¤„ç†æ•°æ®ã€‚
- **è§†é¢‘ä¼ è¾“**ï¼šéœ€é€šè¿‡USB/ä»¥å¤ªç½‘æˆ–ä¸­é—´è½¬æ¢è®¾å¤‡ã€‚
- **ç”µæºä¸ç”µå¹³**ï¼šç¡®ä¿3.3VåŒ¹é…ï¼Œå¿…è¦æ—¶ä½¿ç”¨ç”µå¹³è½¬æ¢å™¨ã€‚

å¦‚éœ€è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œè¯·æä¾›å…·ä½“é£æ§å™¨å‹å·å’Œç›¸æœºæ¨¡å—å‹å·ï¼Œä»¥ä¾¿å®šåˆ¶è¯¦ç»†æ–¹æ¡ˆã€‚

## ç¡¬ä»¶è®¾ç½®

åº•æ¿åŒæ—¶æä¾›äº† Pixhawk å’Œ Orin æ¥å£ï¼Œå¦‚ä¸Šæ–‡æ‰€è¿°çš„ [å¼•è„šåˆ†é…](#pinouts) æ‰€ç¤ºã€‚Pixhawk æ¥å£ç¬¦åˆ Pixhawk è¿æ¥å™¨æ ‡å‡†ï¼ˆé’ˆå¯¹æ ‡å‡†æ¶µç›–çš„æ¥å£ï¼‰ï¼Œè¿™æ„å‘³ç€è¯¥æ¿å¯ä»¥é€šè¿‡é€šç”¨çš„ç»„è£…è¯´æ˜ä¸º [å¤šæ—‹ç¿¼æœºä½“](../assembly/assembly_mc.md)ã€[å›ºå®šç¿¼](../assembly/assembly_fw.md) å’Œ [å‚ç›´èµ·é™](../assembly/assembly_vtol.md) æœºä½“è¿æ¥ GPS ç­‰å¸¸è§„å¤–è®¾ï¼Œæˆ–å‚è€ƒå¯¹åº”é£æ§çš„ Pixhawk æŒ‡å—ï¼ˆä¾‹å¦‚ [Pixhawk 6X å¿«é€Ÿå…¥é—¨](../assembly/quick_start_pixhawk6x.md)ï¼‰ã€‚

ä¸»è¦å·®å¼‚å¯èƒ½ä½“ç°åœ¨ç”µæºè®¾ç½®ï¼ˆè§ä¸‹æ–‡ï¼‰ä»¥åŠè¿æ¥åˆ° Jetson çš„é™„åŠ å¤–è®¾é…ç½®ä¸Šã€‚

### å¤–è®¾

ä¸‹å›¾è¿›ä¸€æ­¥è¯´æ˜äº†å¤–è®¾åº”è¿æ¥çš„æ¥å£ä½ç½®ã€‚

![Jetson è½½æ¿å¤–è®¾ç¤ºæ„å›¾](../../assets/companion_computer/holybro_pixhawk_jetson_baseboard/peripherals_block_diagram_2.png)

### ç”µæºæ¥çº¿

æ¿è½½çš„ Pixhawk å’Œ Jetson éƒ¨åˆ†å¿…é¡»é€šè¿‡å„è‡ªçš„ç”µæºæ¥å£å•ç‹¬ä¾›ç”µã€‚éšæ¿æä¾›çš„ç”µæºæ¨¡å—æ”¯æŒ 2S-12S ç”µæ± è¾“å…¥ï¼Œå¹¶ä¸º Pixhawk éƒ¨åˆ†æä¾›ç¨³å‹ç”µæºã€‚å…¶å¦ä¸€è·¯è¾“å‡ºé€šå¸¸è¿æ¥åˆ°ï¼ˆéšæ¿æä¾›çš„ï¼‰ç”µæºåˆ†é…æ¿ï¼Œè¿›è€Œä¸ºç”µæœºã€èˆµæœºç­‰è®¾å¤‡ä¾›ç”µï¼ŒåŒæ—¶ä¸º Jetson ä¾›ç”µï¼ˆå¯é€šè¿‡ UBEC æˆ–ç›´æ¥ä¾›ç”µï¼‰ã€‚

Jetson éƒ¨åˆ†çš„è¾“å…¥ç”µå‹èŒƒå›´ä¸º 7V-21Vï¼Œå¯¹åº” 3S æˆ– 4S ç”µæ± ã€‚è‹¥ä½¿ç”¨é«˜äº Jetson å…è®¸ç”µå‹çš„ç”µæ± ï¼Œå¯é€šè¿‡ UBEC é™å‹ä¾›ç”µï¼Œæˆ–ä½¿ç”¨ç‹¬ç«‹ç”µæ± ä¸º Jetson ä¾›ç”µã€‚

ä»¥ä¸‹å±•ç¤ºäº†éƒ¨åˆ†å¸¸è§æ¥çº¿é…ç½®ã€‚

#### 3S/4S ç”µæ± 

æ­¤é…ç½®æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ 3S/4S ç”µæ± ï¼ˆè¾“å‡ºä½äº 21Vï¼‰åŒæ—¶ä¸º Pixhawk å’Œ Jetson éƒ¨åˆ†ä¾›ç”µã€‚

![ç”µæºæ¥çº¿ - ä½¿ç”¨å•ä¸ª 3S æˆ– 4S ç”µæ± ](../../assets/companion_computer/holybro_pixhawk_jetson_baseboard/power1_one_battery_3s_4s.jpg)

#### 5S åŠä»¥ä¸Šç”µæ± ï¼ˆæ­é… UBECï¼‰

æ­¤é…ç½®å±•ç¤ºå¦‚ä½•ä½¿ç”¨å¤–éƒ¨ UBECï¼ˆéšæ¿æä¾›ï¼‰ä¸º Jetson æä¾›åˆé€‚ç”µå‹ï¼Œå½“ä½¿ç”¨é«˜å‹ç”µæ± ï¼ˆ>21Vï¼‰æ—¶ã€‚æ ¹æ®ç”µæºéœ€æ±‚ï¼Œä¹Ÿå¯ä½¿ç”¨è¯¥ UBECï¼ˆæˆ–å…¶ä»– UBECï¼‰ä¸ºèˆµæœºç­‰æ§åˆ¶éƒ¨ä»¶æä¾›ç¨³å‹ç”µæºã€‚

![ç”µæºæ¥çº¿ - å¤§å®¹é‡ç”µæ± å’Œ UBEC](../../assets/companion.computer/holybro_pixhawk_jetson_baseboard/power2_one_big_battery_external_ubec.png)

#### åŒç”µæ± ï¼ˆæ—  UBECï¼‰

æ­¤é…ç½®å±•ç¤ºå¦‚ä½•ä½¿ç”¨ç‹¬ç«‹ç”µæ± ä¸º Jetson ä¾›ç”µï¼Œè€Œéé€šè¿‡å¤§å®¹é‡ç”µæ± è°ƒèŠ‚ä¾›ç”µï¼ˆå¦‚ä¸Šæ–‡æ‰€ç¤ºï¼‰ã€‚

![ç”µæºæ¥çº¿ - åŒç”µæ± æ—  UBEC](../../assets/companion_computer/holybro_pixhawk_jetson_baseboard/power3_two_battery_no_ubec.jpg)

#### ä½¿ç”¨ç”µæºé€‚é…å™¨

åœ¨å°æ¶æµ‹è¯•æœºä½“æ—¶ï¼Œå»ºè®®é€šè¿‡å¤–éƒ¨ç”µæºä¸º Jetson ä¾›ç”µï¼ˆå¦‚ç¤ºæ„å›¾æ‰€ç¤ºï¼‰ã€‚å¯é€šè¿‡ USB-C ç”µæºæˆ–ç”µæ± ï¼ˆå¦‚å›¾ä¸­æ‰€ç¤ºï¼‰ä¸º Pixhawk éƒ¨åˆ†ä¾›ç”µã€‚

![ç”µæºæ¥çº¿ - ç”µæ± å’Œç”µæºé€‚é…å™¨](../../assets/companion_computer/holybro_pixhawk_jetson_baseboard/power4_battery_and_power_adapter.png)

## çƒ§å½• Jetson æ¿

::: info
æ­¤ Jetson é…ç½®å·²åœ¨ Nvidia Jetpack 6.0 (Ubuntu 22.04 åŸºç¡€) å’Œ ROS 2 Humble ä¸Šè¿›è¡Œæµ‹è¯•ï¼Œè¿™äº›æ˜¯ PX4-Autopilot ç¤¾åŒºç›®å‰æ”¯æŒçš„ç‰ˆæœ¬ã€‚
å¼€å‘è®¡ç®—æœºä¹Ÿè¿è¡Œ Ubuntu 22.04ã€‚
:::

å½“ Jetson ä¼´é£è®¡ç®—æœºå¤„äºæ¢å¤æ¨¡å¼æ—¶ï¼Œå¯ä»¥é€šè¿‡å¼€å‘è®¡ç®—æœºä½¿ç”¨ [Nvidia SDK Manager](https://docs.nvidia.com/sdk-manager/download-run-sdkm/index.html#download-sdk-manager) è¿›è¡Œçƒ§å½•ã€‚
Jetson æ¿è¿›å…¥æ¢å¤æ¨¡å¼çš„æ–¹æ³•æœ‰å¾ˆå¤šç§ï¼Œä½†åœ¨æ­¤æ¿ä¸Šæœ€ä½³æ–¹æ³•æ˜¯ä½¿ç”¨ä¸ºæ­¤ç›®çš„æä¾›çš„æ»‘åŠ¨å¼€å…³ã€‚
æ‚¨è¿˜éœ€è¦å°†å¼€å‘è®¡ç®—æœºé€šè¿‡ä¸‹å›¾æ‰€ç¤ºçš„ç‰¹å®š USB-C æ¥å£è¿æ¥åˆ°ä¸»æ¿ã€‚

![USB æ¥å£å’Œå¼•å¯¼åŠ è½½ç¨‹åºå¼€å…³](../../assets/companion_computer/holybro_pixhawk_jetson_baseboard/flashing_usb.png)

::: tip
è¯¥ USB æ¥å£ä»…ç”¨äºçƒ§å½• Jetsonï¼Œä¸èƒ½ç”¨ä½œè°ƒè¯•æ¥å£ã€‚
:::

è¯·ä½¿ç”¨åœ¨çº¿æˆ–ç¦»çº¿å®‰è£…ç¨‹åºä¸‹è½½ [Nvidia SDK Manager](https://docs.nvidia.com/sdk-manager/download-run-sdkm/index.html#download-sdk-manager)ï¼ˆéœ€è¦ Nvidia è´¦å·æ‰èƒ½å®‰è£…å’Œä½¿ç”¨ SDKManagerï¼‰ã€‚

å¯åŠ¨ SDKManager åï¼Œå¦‚æœå¼€å‘æ¿å·²é€šè¿‡æ¢å¤æ¨¡å¼è¿æ¥åˆ°ä¸»æœºè®¡ç®—æœºï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°å¦‚ä¸‹æ‰€ç¤ºçš„å±å¹•ï¼š

![SDK Manager åˆå§‹åŒ–ç•Œé¢](../../assets/companion_computer/holybro_pixhawk_jetson_baseboard/nvidia_sdkmanager_1.png)

åœ¨ä¸‹ä¸€ä¸ªç•Œé¢ä¸­å¯ä»¥é€‰æ‹©è¦å®‰è£…çš„ç»„ä»¶ã€‚
å¦‚å›¾æ‰€ç¤ºé€‰æ‹© _Jetson Linux_ ç›®æ ‡ç»„ä»¶ï¼ˆæ— éœ€é€‰æ‹©å…¶ä»–ç»„ä»¶ï¼Œå› ä¸ºçƒ§å½•å®Œæˆåå¼€å‘æ¿ä¼šæ–­å¼€è¿æ¥ï¼‰ã€‚

![SDK Manager å®‰è£…ç»„ä»¶é¡µé¢](../../assets/companion_computer/holybro_pixhawk_jetson_baseboard/nvidia_sdkmanager_2.png)

åœ¨æ¥ä¸‹æ¥çš„ç•Œé¢ä¸­ç¡®è®¤æ‰€é€‰è®¾å¤‡ï¼š

- åœ¨ OEM é…ç½®ä¸­é€‰æ‹© `Pre-config`ï¼ˆè¿™å°†è·³è¿‡é‡å¯åçš„ Ubuntu é¦–æ¬¡è®¾ç½®ç•Œé¢ï¼‰ã€‚
- é€‰æ‹©æ‚¨åå¥½çš„ç”¨æˆ·åå’Œå¯†ç ï¼ˆè¯·è®°å½•ä¸‹æ¥ï¼‰ï¼Œè¿™äº›å°†ä½œä¸º Jetpack çš„ç™»å½•å‡­æ®ã€‚
- é€‰æ‹© `NVMe` ä½œä¸ºå­˜å‚¨è®¾å¤‡ï¼Œå› ä¸ºå¼€å‘æ¿å…·æœ‰ç‹¬ç«‹çš„ SSD å­˜å‚¨ç©ºé—´ã€‚

![SDK Manager å®‰è£…å­˜å‚¨å’Œ OEM é…ç½®é¡µé¢](../../assets/companion_computer/holybro_pixhawk_jetson_baseboard/nvidia_sdkmanager_3.png)

ç‚¹å‡» **Flash** å¼€å§‹å®‰è£…é•œåƒã€‚
å®‰è£…è¿‡ç¨‹éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´ã€‚

::: warning
å®‰è£…æœŸé—´é£æ‰‡ä¼šè¿è¡Œï¼Œè¯·ç¡®ä¿é£æ‰‡æœªè¢«é˜»æŒ¡ã€‚
Jetson çƒ§å½•å®Œæˆåå°†å¯åŠ¨åˆ°åˆå§‹ç™»å½•ç•Œé¢ã€‚
:::

çƒ§å½•å®Œæˆå Jetson å°†é‡å¯åˆ°ç™»å½•ç•Œé¢ï¼ˆé™¤éå·²è¿æ¥å¤–éƒ¨æ˜¾ç¤ºå™¨å¦åˆ™æ­¤å˜åŒ–ä¸ä¼šæ˜æ˜¾ï¼‰ã€‚

æ³¨æ„ï¼šåœ¨æ¢å¤æ¨¡å¼ä½ç½®åˆ‡æ¢æ—¶ï¼Œä»…åœ¨çƒ§å½•åé¦–æ¬¡é‡å¯æ—¶è·³è¿‡æ¢å¤æ¨¡å¼ï¼
è¯·æ–­å¼€ Jetson æ¿çš„ç”µæºï¼Œå¹¶å°†å°æ»‘åŠ¨å¼€å…³ä»æ¢å¤æ¨¡å¼åˆ‡æ¢å› EMMCã€‚
è¿™å¯ç¡®ä¿æœªæ¥ Jetson å°†ä»å›ºä»¶å¯åŠ¨è€Œéæ¢å¤æ¨¡å¼ã€‚

## Jetson ç½‘ç»œä¸ SSH ç™»å½•

æ¥ä¸‹æ¥æˆ‘ä»¬ç¡®è®¤ Jetson çš„ WiFi ç½‘ç»œæ˜¯å¦æ­£å¸¸å·¥ä½œï¼ŒæŸ¥æ‰¾å…¶ IP åœ°å€ï¼Œå¹¶é€šè¿‡è¯¥ IP åœ°å€è¿›è¡Œ SSH ç™»å½•ã€‚

ä¸‹å›¾å±•ç¤ºäº†å¦‚ä½•å°† Jetson è½½æ¿ä¸å¤–éƒ¨é”®ç›˜ã€æ˜¾ç¤ºå™¨å’Œé¼ æ ‡è¿æ¥ã€‚
æ­¤æ­¥éª¤æ˜¯ä¸ºäº†é…ç½®ç½‘ç»œè¿æ¥æ‰€å¿…éœ€çš„ã€‚
ä¸€æ—¦æˆ‘ä»¬å»ºç«‹äº†ç½‘ç»œè¿æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ SSH è¿æ¥åˆ° Jetsonï¼Œè€Œæ— éœ€ä½¿ç”¨å¤–éƒ¨æ˜¾ç¤ºå™¨å’Œé”®ç›˜ï¼ˆå¦‚æœéœ€è¦çš„è¯ï¼‰ã€‚

![é¦–æ¬¡ç½‘ç»œè®¾ç½®è¿æ¥å›¾åŠç”µæº](../../assets/companion_computer/holybro_pixhawk_jetson_baseboard/network_diagram.png)

å°†å¤–éƒ¨æ˜¾ç¤ºå™¨è¿æ¥åˆ°æ¿è½½ï¼ˆJetsonï¼‰çš„ HDMI æ¥å£ï¼Œé€šè¿‡å¤‡ç”¨ USB æ¥å£è¿æ¥é”®ç›˜å’Œé¼ æ ‡ï¼Œå¹¶é€šè¿‡ XT-30 è¾“å…¥ä¸º Jetson ä¾›ç”µã€‚
å•ç‹¬è¿æ¥ Pixhawk ç”µæºï¼Œä½¿ç”¨ FC ä¾§çš„ USB-C æ¥å£æˆ– Jetson æ—è¾¹çš„ `Power1`/`Power2` æ¥å£ã€‚

::: tip
Pixhawk ä¹Ÿéœ€è¦ä¾›ç”µï¼Œå› ä¸ºæ¿è½½çš„å†…éƒ¨ä»¥å¤ªç½‘äº¤æ¢æœºä¸é€šè¿‡ XT30 æ¥å£ä¾›ç”µã€‚
:::

å¤–éƒ¨æ˜¾ç¤ºå™¨åº”æ˜¾ç¤ºç™»å½•ç•Œé¢ã€‚
è¾“å…¥æ‚¨åœ¨ä½¿ç”¨ SDKManager ä¸º Jetson åˆ·å†™ç³»ç»Ÿæ—¶è®¾ç½®çš„ _ç”¨æˆ·å_ å’Œ _å¯†ç _ã€‚

æ¥ä¸‹æ¥æ‰“å¼€ç»ˆç«¯ä»¥è·å– Jetson çš„ IP åœ°å€ã€‚
è¯¥ IP åœ°å€å¯ç”¨äºåç»­é€šè¿‡ SSH è¿æ¥ã€‚
è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š

```sh
ip addr show
```

è¾“å‡ºç»“æœåº”ç±»ä¼¼ä»¥ä¸‹å†…å®¹ï¼Œæ˜¾ç¤ºï¼ˆåœ¨æ­¤æƒ…å†µä¸‹ï¼‰`wlan0`ï¼ˆWiFiï¼‰è¿æ¥çš„ IP åœ°å€ä¸º `192.168.1.190`ã€‚
è¯·æ³¨æ„ï¼Œæ­¤æ­¥éª¤ä¸­ _eth0_ çš„æ˜¾ç¤ºå¯èƒ½ä¸æ­¤è¾“å‡ºä¸åŒï¼Œå› ä¸ºæˆ‘ä»¬å°šæœªè®¾ç½®å®ƒï¼Œåç»­æ­¥éª¤ä¸­å°†è¿›è¡Œå®šä¹‰ï¼š

```sh
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
2: l4tbr0: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN group default qlen 1000
    link/ether 3e:c7:e7:79:f3:87 brd ff:ff:ff:ff:ff:ff
3: usb0: <NO-CARRIER,BROADCAST,MULTICAST,UP> mtu 1500 qdisc pfifo_fast master l4tbr0 state DOWN group default qlen 1000
    link/ether 4e:fe:60:5f:cd:19 brd ff:ff:ff:ff:ff:ff
4: usb1: <NO-CARRIER,BROADCAST,MULTICAST,UP> mtu 1500 qdisc pfifo_fast master l4tbr0 state DOWN group default qlen 1000
    link/ether 4e:fe:60:5f:cd:1b brd ff:ff:ff:ff:ff:ff
5: can0: <NOARP,ECHO> mtu 16 qdisc noop state DOWN group default qlen 10
    link/can
6: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether 48:b0:2d:d8:d9:6f brd ff:ff:ff:ff:ff:ff
    altname enP8p1s0
    inet 10.41.10.1/24 brd 10.41.10.255 scope global eth0
       valid_lft forever preferred_lft forever
    inet6 fe80::25eb:4f5b:2eab:6468/64 scope link noprefixroute
       valid_lft forever preferred_lft forever
7: wlan0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP group default qlen 1000
    link/ether 28:d0:ea:89:35:78 brd ff:ff:ff:ff:ff:ff
    altname wlP1p1s0
    inet 192.168.1.190/24 brd 192.168.1.255 scope global dynamic noprefixroute wlan0
       valid_lft 85729sec preferred_lft 85729sec
    inet6 fd71:5f79:6b08:6e4f:9f84:2646:dc24:ce7b/64 scope global temporary dynamic
       valid_lft 1790sec preferred_lft 1790sec
    inet6 fd71:5f79:6b08:6e4f:ec50:8cb1:91be:7dd6/64 scope global dynamic mngtmpaddr noprefixroute
       valid_lft 1790sec preferred_lft 1790sec
    inet6 fe80::8276:b752:2b4b:5977/64 scope link noprefixroute
       valid_lft forever preferred_lft forever
```

::: tip å¦‚æœå‘½ä»¤æ— æ³•è¿è¡Œ ...
æ¿è½½çš„ WiFi å¡å¯èƒ½æ˜¯ _Intel 8265NGW AC Dual Band_ æˆ– _Realtek RTL8B22CE_ã€‚
Intel æ¨¡å—å¯èƒ½æ— æ³•å¼€ç®±å³ç”¨ï¼Œæ­¤æ—¶åº”æ‰“å¼€ç»ˆç«¯å¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥å®‰è£…å…¶é©±åŠ¨ç¨‹åºï¼š

```sh
sudo apt-get install -y backport-iwlwifi-dkms
```

ç„¶åé‡å¤ä¸Šè¿°æ­¥éª¤ä»¥å°è¯•è·å– IP åœ°å€ã€‚
:::

ç°åœ¨æˆ‘ä»¬å·²ç»è·å¾—äº† IP åœ°å€ï¼Œåœ¨æ‚¨çš„ _å¼€å‘è®¡ç®—æœº_ ä¸Šæ‰“å¼€ç»ˆç«¯ã€‚
é€šè¿‡ SSH ç™»å½• Jetsonï¼Œå¹¶æŒ‡å®šæ‚¨ Jetson çš„ IP åœ°å€ï¼ˆæ‚¨éœ€è¦è¾“å…¥ä¸ä¹‹å‰ç›¸åŒçš„å‡­æ®ï¼‰ï¼š

```sh
ssh holybro@192.168.1.190
```

å¦‚æœæˆåŠŸï¼Œæ‚¨å¯ä»¥ç§»é™¤å¤–éƒ¨æ˜¾ç¤ºå™¨ï¼Œå› ä¸ºæ­¤åå¯ä»¥ä»å¼€å‘è®¡ç®—æœºç™»å½•ã€‚

## Jetsonä¸Šçš„åˆå§‹å¼€å‘è®¾ç½®

ç™»å½•åˆ°Jetsonåï¼Œå®‰è£…ä»¥ä¸‹ä¾èµ–é¡¹ï¼ˆè¿™äº›å¯¹äºå¤§å¤šæ•°å¼€å‘ä»»åŠ¡éƒ½æ˜¯å¿…éœ€çš„ï¼‰ï¼š

```sh
sudo apt update
sudo apt install build-essential cmake git genromfs kconfig-frontends libncurses5-dev flex bison libssl-dev
```

## æ„å»º/çƒ§å½• Pixhawk

æ›´æ–° PX4 æ¨èçš„æ–¹å¼æ˜¯ä½¿ç”¨å¼€å‘è®¡ç®—æœºè¿æ¥ Pixhawk æ¿è½½éƒ¨åˆ†è¿›è¡Œæ“ä½œã€‚  
ä½ å¯ä»¥ä½¿ç”¨ QGroundControl å®‰è£…é¢„æ„å»ºçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæˆ–è€…å…ˆæ„å»ºå†ä¸Šä¼ è‡ªå®šä¹‰å›ºä»¶ã€‚

ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆï¼Œä½ ä¹Ÿå¯ä»¥ä» Jetson æ„å»ºå¹¶éƒ¨ç½² PX4 å›ºä»¶åˆ° Pixhawk æ¿è½½éƒ¨åˆ†ã€‚

### ä»å¼€å‘è®¡ç®—æœºæ„å»º/éƒ¨ç½² PX4ï¼ˆæ¨èï¼‰

é¦–å…ˆå°†å¼€å‘è®¡ç®—æœºè¿æ¥åˆ° Pixhawk FMU USB-C ç«¯å£ï¼ˆå¦‚ä¸‹å›¾é«˜äº®éƒ¨åˆ†ï¼‰ï¼š

![å°†å¼€å‘è®¡ç®—æœºè¿æ¥åˆ° Pixhawk USB ç«¯å£](../../assets/companion_computer/holybro_pixhawk_jetson_baseboard/pixhawk_fmu_usb_c.png)

å¦‚æœéœ€è¦ä½¿ç”¨é¢„æ„å»ºäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè¯·å¯åŠ¨ QGroundControl å¹¶æŒ‰ç…§ [åŠ è½½å›ºä»¶](../config/firmware.md) ä¸­çš„è¯´æ˜éƒ¨ç½²æœ€æ–°ç‰ˆæœ¬çš„ PX4ã€‚  
ä¹‹åä½ éœ€è¦é€‰æ‹©ä¸€ä¸ªæœºä½“ç±»å‹å¹¶å®Œæˆå…¶ä»–å¸¸è§„é…ç½®ã€‚

å¦‚æœéœ€è¦æ„å»ºå¹¶ä¸Šä¼  _è‡ªå®šä¹‰å›ºä»¶_ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

- [è®¾ç½®å¼€å‘ç¯å¢ƒï¼ˆå·¥å…·é“¾ï¼‰](../dev_setup/dev_env.md)  
- [æ„å»º PX4 è½¯ä»¶](../dev_setup/building_px4.md)  
- ä½¿ç”¨ [å‘½ä»¤è¡Œ](../dev_setup/building_px4.md#uploading-firmware-flashing-the-board) æˆ– QGroundCï¼ˆå¦‚ä¸Šæ–‡æ‰€è¿°ï¼‰ä¸Šä¼ å›ºä»¶

### åœ¨ Jetson ä¸Šæ„å»º PX4

ä½ ä¹Ÿå¯ä»¥åœ¨ Jetson ä¸Šæ„å»ºå’Œå¼€å‘ PX4 ä»£ç ã€‚  
æ³¨æ„å¦‚æœä½ å·²æœ‰å¼€å‘è®¡ç®—æœºæ— éœ€æ‰§è¡Œæ­¤æ“ä½œï¼Œä½†å¯ä»¥æŒ‰éœ€è¿›è¡Œã€‚

é¦–å…ˆæ‰“å¼€ç»ˆç«¯å¹¶é€šè¿‡ SSH ä¼šè¯è¿æ¥åˆ° Jetsonï¼Œç„¶åè¾“å…¥ä»¥ä¸‹å‘½ä»¤å…‹éš† PX4 æºä»£ç ï¼š

```sh
git clone https://github.com/PX4/PX4-Autopilot.git --recursive
```

::: tip
å¦‚æœä¸éœ€è¦æ‰€æœ‰åˆ†æ”¯å’Œæ ‡ç­¾ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è·å–ä»“åº“çš„ä¸€éƒ¨åˆ†ï¼š

```sh
git clone https://github.com/PX4/PX4-Autopilot.git --recursive --depth 1 --single-branch --no-tags
```

:::

ç„¶åé€šè¿‡ä»¥ä¸‹å‘½ä»¤å®‰è£… Ubuntu æ„å»ºå·¥å…·é“¾ï¼š

```sh
bash ./PX4-Autopilot/Tools/setup/ubuntu.sh --no-sim-tools
```

å¦‚æœå‡ºç°è­¦å‘Šï¼Œå¯èƒ½éœ€è¦è¿è¡Œä»¥ä¸‹å‘½ä»¤å°†äºŒè¿›åˆ¶ç›®å½•è·¯å¾„æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼š

```sh
echo 'export PATH="$HOME/.local/bin:$PATH"' >> ~/.bashrc && source ~/.bashrc
```

::: tip
å¦‚æœè¿è¡Œ `ubuntu.sh` æ—¶å‡ºç°ç±»ä¼¼ä»¥ä¸‹é”™è¯¯ï¼š

```sh
E: Unable to locate package g++-multilib
E: Couldn't find any package by regex 'g++-multilib'
```

éœ€è¦æŒ‰ç…§ä»¥ä¸‹æ–¹å¼å®‰è£…ç›¸åº”çš„ gcc å·¥å…·é“¾ï¼Œç„¶åé‡æ–°è¿è¡Œ `ubuntu.sh`ï¼š

```sh
sudo apt install gcc-arm-none-eabi gdb-arm-none-eabi -y
```

:::

ç„¶åæˆäºˆæ“ä½œç³»ç»Ÿä½¿ç”¨ä¸²å£çš„æƒé™ï¼š

```sh
sudo usermod -a -G dialout $USER
sudo apt-get remove modemmanager -y
```

é€šè¿‡ä¸ºè½½æ¿ä¸Šçš„ Pixhawk ç¡¬ä»¶æ„å»º PX4 æ¥è¿›è¡Œå®Œæ•´æ€§æ£€æŸ¥ã€‚  
å‡è®¾ä½ ä½¿ç”¨çš„æ˜¯ Pixhawk 6xï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š

```sh
make px4_fmu-v6x_default
```

å¦‚æœæ„å»ºæˆåŠŸï¼Œå¯ä»¥å°† Pixhawk USB-C ç«¯å£è¿æ¥åˆ° Jetson USB ç«¯å£ï¼ˆå¦‚ä¸‹å›¾ï¼Œé™„å¸¦çš„çº¿ç¼†åŒ…å«åœ¨å¥—ä»¶ä¸­ï¼‰ã€‚

![å¦‚ä½•å°† Jetson ç›´æ¥è¿æ¥åˆ° Pixhawk](../../assets/companion_computer/holybro_pixhawk_jetson_baseboard/upload_px4_connection.png)

ç„¶åé€šè¿‡æ·»åŠ  `upload` å‚æ•°è¿›è¡Œæ„å»ºæ¥ä¸Šä¼ å›ºä»¶åˆ° Pixhawkï¼š

```sh
make px4_fmu-v6x_default upload
```

## ä½¿ç”¨ Netplan é…ç½®ä»¥å¤ªç½‘

Holybro Jetson Pixhawk è½½æ¿åœ¨ Pixhawk ä¸ Jetson ä¹‹é—´å†…ç½®ç½‘ç»œäº¤æ¢æœºï¼Œå¯ç”¨äº MAVLink æˆ– ROS 2 é€šä¿¡ï¼ˆæˆ–ä»»ä½•å…¶ä»–åè®®ï¼‰ã€‚  
è™½ç„¶æ— éœ€è¿æ¥ä»»ä½•å¤–éƒ¨çº¿ç¼†ï¼Œä½†ä»éœ€é…ç½®ä»¥å¤ªç½‘è¿æ¥ï¼Œç¡®ä¿ Jetson å’Œ PX4 å¤„äºåŒä¸€å­ç½‘ã€‚

PX4 çš„é»˜è®¤ IP åœ°å€ä¸º `10.41.10.2`ï¼ˆPX4 v1.15 åŠæ›´æ—©ç‰ˆæœ¬ä½¿ç”¨ `192.168.0.3`ï¼‰ï¼Œè€Œ Jetson é€šå¸¸é…ç½®åœ¨ä¸åŒå­ç½‘çš„é»˜è®¤ IP åœ°å€ä¸Šã€‚  
ä¸ºäº†ä½¿ä¸¤å—æ¿å¡èƒ½å¤Ÿé€šä¿¡ï¼Œå®ƒä»¬éœ€è¦å¤„äºåŒä¸€å­ç½‘ã€‚

::: æç¤º
è¿™äº›è¯´æ˜å¤§è‡´å¯¹åº” [PX4 ä»¥å¤ªç½‘è®¾ç½®](../advanced_config/ethernet_setup.md)ï¼ˆä»¥åŠ [Holybro Pixhawk RPi CM4 åº•æ¿](../companion_computer/holybro_pixhawk_rpi_cm4_baseboard.md)ï¼‰ã€‚
:::

æ¥ä¸‹æ¥æˆ‘ä»¬ä¿®æ”¹ Jetson çš„ IP åœ°å€ï¼Œä½¿å…¶ä¸ Pixhawk å¤„äºåŒä¸€ç½‘ç»œï¼š

1. ç¡®ä¿å·²å®‰è£… `netplan`ã€‚  
   å¯é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ï¼š

   ```sh
   netplan -h
   ```

   å¦‚æœæœªå®‰è£…ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š

   ```sh
   sudo apt update
   sudo apt install netplan.io
   ```

2. æ£€æŸ¥ `system_networkd` æ˜¯å¦æ­£åœ¨è¿è¡Œï¼š

   ```sh
   sudo systemctl status systemd-networkd
   ```

   å¦‚æœå¤„äºæ´»åŠ¨çŠ¶æ€ï¼Œåº”çœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹çš„è¾“å‡ºï¼š

   ```sh
   â— systemd-networkd.service - Network Configuration
        Loaded: loaded (/lib/systemd/system/systemd-networkd.service; enabled; vendor preset: enabled)
        Active: active (running) since Wed 2024-09-11 23:32:44 EDT; 23min ago
   TriggeredBy: â— systemd-networkd.socket
          Docs: man:systemd-networkd.service(8)
      Main PID: 2452 (systemd-network)
        Status: "Processing requests..."
         Tasks: 1 (limit: 18457)
        Memory: 2.7M
           CPU: 157ms
        CGroup: /system.slice/systemd-networkd.service
                â””â”€2452 /lib/systemd/systemd-networkd

   Sep 11 23:32:44 ubuntu systemd-networkd[2452]: lo: Gained carrier
   Sep 11 23:32:44 ubuntu systemd-networkd[2452]: wlan0: Gained IPv6LL
   Sep 11 23:32:44 ubuntu systemd-networkd[2452]: eth0: Gained IPv6LL
   Sep 11 23:32:44 ubuntu systemd-networkd[2452]: Enumeration completed
   Sep 11 23:32:44 ubuntu systemd[1]: Started Network Configuration.
   Sep 11 23:32:44 ubuntu systemd-networkd[2452]: wlan0: Connected WiFi access point: Verizon_7YLWWD (78:67:0e:ea:a6:0>
   Sep 11 23:34:16 ubuntu systemd-networkd[2452]: eth0: Re-configuring with /run/systemd/network/10-netplan-eth0.netwo>
   Sep 11 23:34:16 ubuntu systemd-networkd[2452]: eth0: DHCPv6 lease lost
   Sep 11 23:34:16 ubuntu systemd-networkd[2452]: eth0: Re-configuring with /run/systemd/network/10-netplan-eth0.netwo>
   Sep 11 23:34:16 ubuntu systemd-networkd[2452]: eth0: DHCPv6 lease lost
   ```

   å¦‚æœ `system_networkd` æœªè¿è¡Œï¼Œå¯ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯ç”¨ï¼š

   ```sh
   sudo systemctl start systemd-networkd
   sudo systemctl enable systemd-networkd
   ```

3. æ‰“å¼€ Netplan é…ç½®æ–‡ä»¶ï¼ˆä»¥ä¾¿ä¸º Jetson è®¾ç½®é™æ€ IPï¼‰ã€‚

   Netplan é…ç½®æ–‡ä»¶é€šå¸¸ä½äº `/etc/netplan/` ç›®å½•ï¼Œæ–‡ä»¶åç±»ä¼¼ `01-netcfg.yaml`ï¼ˆåç§°å¯èƒ½ä¸åŒï¼‰ã€‚  
   ä»¥ä¸‹ä½¿ç”¨ `nano` æ‰“å¼€æ–‡ä»¶ï¼Œä½†å¯ä½¿ç”¨æ‚¨åå¥½çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼š

   ```sh
   sudo nano /etc/netplan/01-netcfg.yaml
   ```

4. ä¿®æ”¹ yaml é…ç½®ï¼Œè¦†ç›–å†…å®¹ä¸ºä»¥ä¸‹ä¿¡æ¯åä¿å­˜ï¼š

   ```sh
   network:
     version: 2
     renderer: networkd
     ethernets:
       eth0:
         dhcp4: no
         addresses:
           - 10.41.10.1/24
         routes:
           - to: 0.0.0.0/0
             via: 10.41.10.254
         nameservers:
           addresses:
             - 10.41.10.254
   ```

   æ­¤é…ç½®ä¸º Jetson çš„ä»¥å¤ªç½‘æ¥å£åˆ†é…é™æ€ IP åœ°å€ `10.41.10.1`ã€‚

5. ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åº”ç”¨æ›´æ”¹ï¼š

   ```sh
   sudo netplan apply
   ```

Pixhawk çš„ä»¥å¤ªç½‘åœ°å€é»˜è®¤è®¾ç½®ä¸º `10.41.10.2`ï¼Œä¸ Jetson å¤„äºåŒä¸€å­ç½‘ã€‚  
æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨ Jetson ç»ˆç«¯ä¸­ ping Pixhawk æ¥æµ‹è¯•ä¸Šè¿°æ›´æ”¹ï¼š

```sh
ping 10.41.10.2
```

å¦‚æœæˆåŠŸï¼Œå°†çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼š

```sh
PING 10.41.10.2 (10.41.10.2) 56(84) bytes of data.
64 bytes from 10.41.10.2: icmp_seq=1 ttl=64 time=0.215 ms
64 bytes from 10.41.10.2: icmp_seq=2 ttl=64 time=0.346 ms
64 bytes from 10.41.10.2: icmp_seq=3 ttl=64 time=0.457 ms
64 bytes from 10.41.10.2: icmp_seq=4 ttl=64 time=0.415 ms
```

Jetson å’Œ Pixhawk ç°å·²å¯é€šè¿‡ä»¥å¤ªç½‘é€šä¿¡ã€‚

## MAVLink é…ç½®

MAVLink æ˜¯ Jetson ä¸ PX4 ä¹‹é—´é€šä¿¡çš„åè®®ï¼ˆä¸‹ä¸€èŠ‚å°†è®¨è®º ROS 2 ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆï¼‰ã€‚  
PX4 ç”¨æˆ·é€šå¸¸ä½¿ç”¨ [MAVSDK](../robotics/mavsdk.md) ç®¡ç† MAVLink é€šä¿¡ï¼Œå› ä¸ºå®ƒä¸º MAVLink åè®®æä¾›äº†ç®€å•ä¸”è·¨å¹³å°ã€è·¨ç¼–ç¨‹è¯­è¨€çš„æŠ½è±¡å±‚ã€‚

å†…éƒ¨ä¸²å£å’Œä»¥å¤ªç½‘è¿æ¥é»˜è®¤éƒ½é…ç½®ä¸ºä½¿ç”¨ MAVLinkã€‚

::: info
æ›´å¤šä¿¡æ¯è¯·å‚è§ [MAVLink-Bridge](https://docs.holybro.com/autopilot/pixhawk-baseboards/pixhawk-jetson-baseboard/mavlink-bridge)ï¼ˆHolybro æ–‡æ¡£ï¼‰
:::

### ä¸²å£è¿æ¥

Jetson ä¸ Pixhawk å†…éƒ¨é€šè¿‡ Pixhawk çš„ `TELEM2` æ¥å£è¿æ¥åˆ° Jetson çš„ `THS1` æ¥å£çš„ä¸²å£çº¿è¿æ¥ã€‚  
Pixhawk çš„ `TELEM2` æ¥å£é»˜è®¤é…ç½®ä¸ºä½¿ç”¨ MAVLinkï¼ˆ[MAVLink å¤–è®¾ (GCS/OSD/Companion) > TELEM2](../peripherals/mavlink_peripherals.md#telem2)ï¼‰ï¼Œå› æ­¤æ— éœ€ç‰¹åˆ«æ“ä½œå³å¯æ­£å¸¸å·¥ä½œã€‚

æµ‹è¯•è¿æ¥çš„ç®€ä¾¿æ–¹æ³•æ˜¯è¿è¡Œ Jetson ä¸Šçš„ [MAVSDK-Python](https://github.com/mavlink/MAVSDK-Python) ç¤ºä¾‹ä»£ç ã€‚

é¦–å…ˆå®‰è£… MAVSDK-Pythonï¼š

```sh
pip3 install mavsdk
```

ç„¶åå…‹éš†ä»“åº“ï¼š

```sh
git clone https://github.com/mavlink/MAVSDK-Python --recursive
```

ä¿®æ”¹ `MAVSDK-Python/examples/telemetry.py` ä¸­çš„[è¿æ¥ä»£ç ](https://github.com/mavlink/MAVSDK-Python/blob/707c48c01866cfddc0082217dba9f7fe27d59b27/examples/telemetry.py#L10)ï¼š  
å°†ä»¥ä¸‹ä»£ç ï¼š

```py
await drone.connect(system_address="udp://:14540")
```

æ”¹ä¸ºé€šè¿‡ä¸²å£è¿æ¥ï¼š

```sh
await drone.connect(system_address="serial:///dev/ttyTHS1:921600")
```

ç„¶ååœ¨ Jetson ç»ˆç«¯è¿è¡Œç¤ºä¾‹ï¼š

```sh
python ~/MAVSDK-Python/examples/telemetry.py
```

é¢„æœŸè¾“å‡ºå¦‚ä¸‹ï¼š

``` sh
In air: False
Battery: -1.0
In air: False
Battery: -1.0
In air: False
Battery: -1.0
```

### ä»¥å¤ªç½‘è¿æ¥

Jetson ä¸ Pixhawk å†…éƒ¨é€šè¿‡ä»¥å¤ªç½‘äº¤æ¢æœºè¿æ¥ï¼Œå¦‚æœæ‚¨å·²æŒ‰ç…§ [ä½¿ç”¨ Netplan é…ç½®ä»¥å¤ªç½‘](#ethernet-setup-using-netplan) çš„è¯´æ˜æ“ä½œï¼Œä¸¤è€…å°†å¤„äºåŒä¸€ä»¥å¤ªç½‘å­ç½‘ä¸­ã€‚

ç”±äº Pixhawk çš„ `Ethernet` æ¥å£é»˜è®¤é…ç½®ä¸ºä½¿ç”¨ MAVLinkï¼ˆ[MAVLink å¤–è®¾ (GCS/OSD/Companion) > Ethernet](../peripherals/mavlink_peripherals.md#ethernet)ï¼‰ï¼Œå› æ­¤æ— éœ€å…¶ä»–æ“ä½œå³å¯ä½¿ç”¨ MAVLinkã€‚

æ“ä½œæ­¥éª¤ä¸å‰ä¸€èŠ‚ç›¸åŒï¼Œåªéœ€å°† `connect()` è¡Œä¿®æ”¹ä¸ºï¼š

```sh
await drone.connect(system_address="udp://:14550")
```To resolve the issues with the **MicroXRCEAgent systemd service** and ensure it runs correctly on your **Holybro carrier board with Jetson**, follow these steps:

---

### **1. Fix the Service File**
Your current service file contains **invalid lines** (e.g., `14`, `Holybro carrier board`) and a **malformed `After=` directive**. Replace the entire content of `/etc/systemd/system/microxrceagent.service` with the corrected version below:

```ini
[Unit]
Description=Micro XRCE Agent Service
After=network.target

[Service]
ExecStart=/usr/local/bin/MicroXRCEAgent udp4 -p 8888
User=root
Group=root
Restart=always
ExecStartPre=/bin/sleep 10

[Install]
WantedBy=multi-user.target
```

> âœ… **Verify the path** `/usr/local/bin/MicroXRCEAgent` exists. If not, adjust it to match your actual installation path.

---

### **2. Reload Systemd and Enable the Service**
After fixing the service file, reload systemd and enable the service:

```bash
sudo systemctl daemon-reload
sudo systemctl enable microxrceagent.service
sudo systemctl start microxrceagent.service
```

---

### **3. Check for Errors**
If the service fails to start, use `journalctl` to debug:

```bash
sudo journalctl -u microxrceagent.service --since "5 minutes ago"
```

> ğŸ” Look for errors like:
- `Failed at step EXEC spawning /usr/local/bin/MicroXRCEAgent: No such process`
- `Connection refused` (network issues)
- `Address already in use` (port conflict)

---

### **4. Verify Network Configuration**
Ensure the **Jetson and PX4 client** are on the **same network** and the client is configured to connect to the correct IP/port:

```bash
# On Jetson, check the IP address
hostname -I

# On PX4 client (e.g., Raspberry Pi), set:
export PX4_MICROXRCE_AGENT_URI=udp://<JETSON_IP>:8888
```

---

### **5. Test Manually**
Before relying on systemd, test the agent manually to confirm it works:

```bash
/usr/local/bin/MicroXRCEAgent udp4 -p 8888
```

> âœ… If this works, the issue is likely in the systemd service configuration.

---

### **6. Fix Common Issues**
#### **A. Port Conflict**
If port `8888` is already in use:

```bash
sudo lsof -i :8888
```

Kill conflicting processes or change the port in the service file.

#### **B. Delayed Network**
The `ExecStartPre=/bin/sleep 10` adds a 10-second delay to wait for the network. Adjust if needed.

#### **C. Permissions**
Ensure the service runs as root (`User=root`), as required by the agent.

---

### **7. Final Validation**
After fixing, reboot the Jetson and check the service status:

```bash
sudo reboot
sudo systemctl status microxrceagent.service
```

You should see output similar to:

```
â— microxrceagent.service - Micro XRCE Agent Service
   Loaded: loaded (/etc/systemd/system/microxrceagent.service; enabled; vendor preset: enabled)
   Active: active (running) since ... (date/time)
 Main PID: 1234 (MicroXRCEAgent)
    Tasks: 42 (limit: 18457)
   Memory: 29.6M
   CPU: 1.356s
   CGroup: /system.slice/microxrceagent.service
           â””â”€1234 /usr/local/bin/MicroXRCEAgent udp4 -p 8888
```

---

### **8. Test ROS2 Sensor Data**
Once the agent is running, test the ROS2 example to ensure data flows correctly:

```bash
ros2 launch px4_ros_com sensor_combined_listener.launch.py
```

You should see high-frequency sensor messages like:

```
[sensor_combined_listener-1] RECEIVED SENSOR COMBINED DATA
...
```

---

### **Troubleshooting Checklist**
| Step | Action |
|------|--------|
| âœ… | Correct service file with no typos |
| âœ… | Verify `/usr/local/bin/MicroXRCEAgent` exists |
| âœ… | Ensure `After=network.target` is properly formatted |
| âœ… | Use `journalctl` to debug service failures |
| âœ… | Confirm PX4 client connects to the correct IP/port |
| âœ… | Test agent manually before systemd |

By following these steps, your **MicroXRCEAgent** should run reliably on boot, enabling seamless communication between PX4 and ROS2. ğŸš€## å‚è§

- [Jetson carrier board Holybro Docs](https://docs.holybro.com/autopilot/pixhawk-baseboards/pixhawk-jetson-baseboard)
- [PX4 Middleware docs](../middleware/uxrce_dds.md#starting-the-client)
- [PX4 ROS 2 user guide](../ros2/user_guide.md)